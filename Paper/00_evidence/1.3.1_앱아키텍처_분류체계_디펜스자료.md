# 1.3.1 앱 아키텍처 유형 분류 체계 - 디펜스 자료

## 1. 핵심 내용 요약

### 1.1 연구의 분류 체계
- **연구자 개발 분류**: Android Developer Guide와 선행연구를 기반으로 한 연구 목적에 맞는 분류 체계
- **Android 공식 2가지 방식**을 포렌식 관점에서 **4가지 유형(S1-S4)**으로 세분화
- **분류 기준**: 카메라 제어 방식, 이미지 저장 정책, 시스템 피드백 정책의 3가지 기준 조합

### 1.2 세분화 논리
1. **인텐트 위임 방식** → **S2 (단일 유형)**: 저장·피드백 정책을 직접 제어 불가
2. **직접 API 방식** → **S1, S3, S4 (3가지 유형)**: 저장·피드백 정책을 직접 제어 가능

### 1.3 4가지 유형 정의
- **S1 (시스템 표준 카메라 구현)**: 직접 API + 시스템 표준 저장 + 표준 피드백
- **S2 (인텐트 기반 위임 방식)**: 인텐트 위임 + 위임받은 앱의 정책 따름
- **S3 (앱 내장 카메라 구현)**: 직접 API + 앱 내부 저장 + 표준 피드백  
- **S4 (시스템 피드백 우회 구현)**: 직접 API + 표준 저장 + 피드백 우회

---

## 2. Android 공식 문서 근거

### 2.1 Android의 공식 2가지 카메라 구현 방식

#### 📋 **방식 1: 카메라 인텐트 (Camera Intents)**
**출처**: [사진 찍기 - Android Developers](https://developer.android.com/media/camera/camera-intents?hl=ko)

**핵심 내용**:
> "Android에서는 Intent를 사용하여 카메라 앱에 사진을 찍어달라고 요청할 수 있습니다... **이 방법의 장점은 자체 카메라 코드를 작성할 필요가 없다는 것입니다. 대신, 다른 카메라 앱에 작업을 위임하여** 결과 이미지를 앱으로 다시 받게 됩니다."

**기술적 구현**:
```kotlin
private fun dispatchTakePictureIntent() {
    val takePictureIntent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)
    startActivityForResult(takePictureIntent, REQUEST_IMAGE_CAPTURE)
}
```

**→ 본 연구의 S2 (인텐트 기반 위임 방식)와 정확히 일치**

#### 📋 **방식 2: 직접 API 사용 (CameraX/Camera2)**
**출처 1**: [CameraX 개요 - Android Developers](https://developer.android.com/media/camerax?hl=ko)
**출처 2**: [Camera2 API 참조 - Android Developers](https://developer.android.com/reference/android/hardware/camera2/package-summary?hl=ko)

**CameraX 핵심 내용**:
> "CameraX는 **앱에 카메라 기능을 추가하는 데 사용**할 수 있는 Jetpack 라이브러리입니다... 기기별 호환성 문제를 해결하고 **앱 내에서 일관되고 사용하기 쉬운 API**를 제공합니다."

**Camera2 핵심 내용**:
> "이 패키지는 Android 기기의 **카메라 하위 시스템을 직접 제어**하기 위한 인터페이스를 제공합니다."

**→ 본 연구의 S1, S3, S4의 공통 기술 기반**

### 2.2 S4 유형의 기술적 근거

#### 📋 **Camera2의 저수준 제어 기능**
**출처**: [CaptureRequest - Android Developers](https://developer.android.com/reference/android/hardware/camera2/CaptureRequest?hl=ko)

**핵심 내용**:
> "CaptureRequest는 단일 캡처에 대한 설정과 출력 버퍼를 캡슐화합니다... 요청에는 **캡처 하드웨어(센서, 렌즈, 플래시), 처리 파이프라인, 제어 알고리즘에 대한 모든 구성**이 포함됩니다."

**기술적 의미**: 
- 개발자가 시스템의 표준 절차(예: `MediaActionSound`)를 우회할 수 있는 기술적 도구 제공
- S4 유형 앱들이 이 기능을 활용하여 비표준적 구현 가능

---

## 3. 선행연구 근거

### 3.1 안원석 외 (2025) 연구
**제목**: "비루팅 환경에서 ADB를 활용한 안드로이드 카메라 및 오디오 행위 탐지 연구"

**핵심 발견**:
- **기본 카메라 앱(직접 API 호출)**과 **메신저 앱(인텐트 위임)**이 `media.camera` 서비스 접근에서 **서로 다른 패턴**을 보임을 실증
- 앱 아키텍처별 로그 생성 패턴 차이의 실증적 근거 제공

**본 연구와의 연관성**:
- **기본 카메라 앱**: S1 (시스템 표준 카메라 구현) 유형의 대표 사례
- **인텐트 위임 방식**: S2 (인텐트 기반 위임 방식) 유형의 기술적 기반
- **실증적 차이 확인**: 직접 API vs 인텐트 위임 방식이 실제로 다른 로그 패턴 생성

### 3.2 권혁철 (2024) 연구
**핵심 발견**:
- 다양한 앱 유형별로 시스템 로그 생성 패턴에 **뚜렷한 차이** 존재
- 인텐트를 통한 앱 간 상호작용이 독특한 로그 흔적 (예: `activity` 로그의 스택 변화) 생성

**본 연구와의 연관성**:
- 앱 아키텍처별 차별적 로그 패턴의 이론적 근거 제공
- S2 (인텐트 기반)의 `activity` 로그 구분력 근거

---

## 4. 분류 체계의 논리적 정당성

### 4.1 MECE 원칙 준수
- **Mutually Exclusive (상호 배타적)**: 각 앱은 하나의 유형에만 속함
- **Collectively Exhaustive (전체 포함)**: Android 카메라 구현의 모든 방식 포함

### 4.2 분류 기준의 객관성

| **분류 기준** | **측정 가능성** | **기술적 근거** |
|---|---|---|
| **카메라 제어 방식** | Intent 호출 vs API 직접 호출 | 코드 분석으로 명확히 구분 가능 |
| **이미지 저장 정책** | 저장 경로 및 MediaStore 등록 여부 | 파일 시스템 분석으로 확인 가능 |
| **시스템 피드백 정책** | 셔터음, 알림 등의 발생 여부 | 시스템 로그 분석으로 확인 가능 |

### 4.3 포렌식 관점의 의의
- **실무적 중요성**: 각 유형별로 **다른 로그 수집 전략** 필요
- **증거 가치**: 앱의 구현 방식에 따른 **증거 흔적의 차별화** 규명
- **탐지 효율성**: 아키텍처별 **특화된 탐지 방법** 개발 가능

---

## 5. 디펜스 예상 질문 및 답변

### 🤔 **Q1: 왜 기존 Android 공식 2가지가 아닌 4가지로 세분화했는가?**

**A1**: 
1. **포렌식 관점의 필요성**: 공식 분류는 개발 편의성 중심이지만, 포렌식 분석에서는 **로그 생성 패턴의 차이**가 더 중요합니다.

2. **실증적 근거**: 안원석 외(2025)가 **기본 카메라 앱(직접 API 호출)**과 **메신저 앱(인텐트 위임)**이 `media.camera` 서비스 접근에서 서로 다른 패턴을 보임을 실증했으며, 이는 구현 방식에 따른 차별적 로그 패턴의 존재를 뒷받침합니다.

3. **기술적 차별성**: 
   - **S1 vs S3**: 동일 API지만 저장 정책 차이 (갤러리 저장 vs 앱 내부 저장)
   - **S1 vs S4**: 동일 API지만 피드백 정책 차이 (표준 피드백 vs 우회)

### 🤔 **Q2: S4 (피드백 우회)는 Android에서 공식적으로 지원하는가?**

**A2**: 
1. **기술적 가능성**: Camera2 API의 `CaptureRequest`는 하드웨어 제어의 모든 권한을 개발자에게 제공합니다.

2. **공식 문서 근거**: "캡처 하드웨어, 처리 파이프라인, 제어 알고리즘에 대한 **모든 구성**"이 포함된다고 명시되어 있어, 표준 절차 우회가 기술적으로 가능합니다.

3. **실무적 존재**: 실제로 무음 카메라 앱들이 Play Store에 존재하며, 이들은 S4 유형의 대표 사례입니다.

### 🤔 **Q3: 4개 분류가 정말 상호 배타적인가? 경계가 모호하지 않은가?**

**A3**: 
1. **명확한 기술적 기준**:
   - Intent 사용 여부: 코드 분석으로 명확히 구분
   - 저장 경로: 파일 시스템 분석으로 객관적 확인
   - 피드백 우회: 시스템 로그 분석으로 감지 가능

2. **측정 가능한 지표**: 각 기준은 추상적 개념이 아닌 **측정 가능한 기술적 특성**입니다.

3. **대표 앱 선정**: 각 유형의 특성을 가장 명확히 보여주는 대표 앱을 선정하여 경계 모호성을 최소화했습니다.

### 🤔 **Q4: 4개로 분류하는 것의 통계적 근거가 있는가?**

**A4**: 
1. **이론적 근거**: 
   - **인텐트 위임 방식**: 저장·피드백 정책을 제어할 수 없어 **1개 유형(S2)** 
   - **직접 API 방식**: 저장·피드백 정책을 직접 제어하여 **3개 유형(S1, S3, S4)** 생성
   - 총 4가지 논리적 조합 가능

2. **실증적 검증**: 파일럿 테스트를 통해 각 유형이 실제로 **구별 가능한 로그 패턴**을 생성하는지 검증 예정

3. **통계적 검정력**: G*Power 분석 결과 4그룹 ANOVA에 충분한 표본크기(그룹당 48개) 확보

### 🤔 **Q5: 이 분류가 다른 연구에서도 적용 가능한가?**

**A5**: 
1. **방법론의 일반화**: 분류 기준(제어 방식, 저장 정책, 피드백 정책)은 다른 Android 앱 분석에도 적용 가능합니다.

2. **재현 가능성**: 각 기준이 객관적이고 측정 가능하여 다른 연구자도 동일한 분류 결과를 얻을 수 있습니다.

3. **확장 가능성**: 향후 새로운 카메라 API나 구현 방식이 등장해도 동일한 분류 논리를 적용할 수 있습니다.

### 🤔 **Q6: 정말로 이 4가지 분류가 로그 패턴에 차이를 만들어낸다는 근거가 있는가?**

**A6**: 
1. **기술적 동작 차이**:
   - **S1**: `Camera2/CameraX` 직접 호출 + `MediaStore` 등록 + 시스템 셔터음
   - **S2**: `MediaStore.ACTION_IMAGE_CAPTURE` Intent + Activity 전환 + 위임받은 앱의 로그 패턴
   - **S3**: `Camera2/CameraX` 직접 호출 + 앱 내부 저장 + 시스템 셔터음
   - **S4**: `Camera2/CameraX` 직접 호출 + `MediaStore` 등록 + 오디오 서비스 조작

2. **예상 로그 차별점**:
   - **`media.camera`**: S1, S3, S4는 직접 접근, S2는 위임된 앱을 통한 간접 접근
   - **`activity`**: S2만 Intent 기반 Activity 전환 패턴 생성
   - **`audio`**: S4는 `AudioManager.setStreamVolume()` 조작 흔적 생성
   - **파일시스템 접근**: S3는 앱 내부 저장소 접근, 나머지는 공용 저장소 접근

3. **실증적 검증 계획**: 파일럿 테스트에서 각 유형의 실제 로그 패턴을 측정하여 차이 여부를 객관적으로 검증합니다.

---

## 6. 추가 참고 자료

### 6.1 Android 공식 문서
- [Android에서 카메라 시작하기](https://developer.android.com/media/camera/get-started-with-camera?hl=ko)
- [카메라 인텐트](https://developer.android.com/media/camera/camera-intents?hl=ko)
- [CameraX 개요](https://developer.android.com/media/camerax?hl=ko)
- [Camera2 API 참조](https://developer.android.com/reference/android/hardware/camera2/package-summary?hl=ko)
- [CaptureRequest 클래스](https://developer.android.com/reference/android/hardware/camera2/CaptureRequest?hl=ko)

### 6.2 관련 선행연구
- 안원석, 홍승표, 이상진. (2025). 비루팅 환경에서 ADB를 활용한 안드로이드 카메라 및 오디오 행위 탐지 연구
- 권혁철. (2024). 안드로이드 스마트폰 디지털 포렌식을 위한 시스템 로그 분석 연구
- 박은후. (2020). 데이터 획득방법에 따른 안드로이드 비휘발성 로그의 포렌식 분석 프로세스 설계 및 적용 방안

### 6.3 기술 표준 문서
- Android Open Source Project (AOSP) Camera Framework Documentation
- Android Compatibility Definition Document (CDD) - Camera Requirements

---

## 7. 결론

### 7.1 분류 체계의 학술적 타당성
1. **이론적 근거**: Android 공식 문서의 명확한 구분을 기반
2. **실증적 근거**: 선행연구의 실험적 검증 결과 활용
3. **방법론적 엄밀성**: 객관적이고 측정 가능한 분류 기준 적용

### 7.2 연구의 독창적 기여
1. **포렌식 관점의 재분류**: 개발 중심 분류를 포렌식 분석에 최적화
2. **실무적 활용성**: 각 유형별 차별화된 탐지 전략 제공
3. **학술적 발전**: 기존 연구의 한계를 극복한 세분화된 분석 체계

### 7.3 향후 연구 방향
1. **검증 확장**: 더 많은 앱 유형에 대한 분류 체계 적용
2. **방법론 개선**: 새로운 Android 버전에 따른 분류 기준 업데이트
3. **실무 적용**: 실제 포렌식 현장에서의 활용도 검증

---

**작성일**: 2024년 9월 (수정: 2025년 1월)
**근거**: Android Developers 공식 문서, 관련 선행연구, 연구자 분석 종합
