# **224세션 이중 분석 Android 로그 실험 수행 계획서**

---

## **📋 실험 개요**

### **연구 목표**
- **핵심 목표**: 선별된 **6종 Android 시스템 로그**의 **개별적인 카메라 탐지 성능** 정량적 측정
- **혁신적 접근**: **이중 분석 프레임워크**를 통한 "카메라 사용" vs "카메라 촬영" 탐지 성능 분리 측정
- **가설 검증**: H1(앱 아키텍처 영향), H2(휘발성 영향)의 통계적 검증

### **실험 구조 (총 224세션)**
```
파일럿 테스트: 64세션 (이중 분석 프레임워크 검증)
├── 4앱 × 2케이스 × 4휘발성 × 2반복 = 64세션
└── 목적: 로그별 성능 특성 파악 및 실험 절차 검증

본 실험: 160세션 (가설 검증용 대규모 데이터)
├── 4앱 × 2케이스 × 4휘발성 × 5반복 = 160세션
└── 목적: H1, H2 가설 검증을 위한 통계적 검정력 확보
```

### **독립변수**
- **앱 아키텍처**: S1(삼성카메라), S2(카카오톡), S3(텔레그램), S4(무음카메라)
- **촬영 케이스**: 촬영Y(카메라 사용+촬영), 촬영N(카메라 사용만)
- **휘발성 조건**: V0(즉시), V-Time(24H후), V-Usage(간섭후), V-Event(재부팅후)

---

## **🧪 1단계: 파일럿 테스트 (64세션)**

### **1.1 목적 및 범위**
- **이중 분석 프레임워크** 실행 가능성 검증
- **6개 선정 로그**의 실제 탐지 성능 특성 파악
- **4가지 휘발성 조건**에서의 로그 보존 특성 확인
- **효율적 실험 전략**의 타당성 검증

### **1.2 실험 설계**

| 변수 | 수준 | 설명 |
|------|------|------|
| 앱 아키텍처 | S1, S2, S3, S4 (4개) | 각 아키텍처별 로그 패턴 분석 |
| 촬영 케이스 | 촬영Y, 촬영N (2개) | 이중 Ground Truth 검증 |
| 휘발성 조건 | V0, V-Time, V-Usage, V-Event (4개) | 모든 조건에서 로그 특성 확인 |
| 반복 횟수 | 2회 | 안정성 및 재현성 확인 |

**총 세션 수**: 4 × 2 × 4 × 2 = **64세션**

### **1.3 로그 특성 기반 그룹화 전략**

#### **전략 1: 로그 휘발성 특성 기반 그룹핑**
```
높은 휘발성 로그 우선 처리:
├── Group A (고휘발성): audio, vibrator_manager
│   └── V-Event, V-Usage 조건 우선 실행
├── Group B (중휘발성): media_camera, media_metrics  
│   └── V-Time 조건 중점 실행
└── Group C (저휘발성): usagestats, activity
    └── 모든 조건에서 안정적 수집 가능
```

#### **전략 2: 앱 아키텍처별 특성 고려**
```
앱별 로그 생성 패턴:
├── S1 (삼성카메라): 모든 로그 풍부한 패턴 생성 → 기준점 역할
├── S2 (카카오톡): Intent 기반 특이 패턴 → activity, usagestats 중점
├── S3 (텔레그램): 인앱 카메라 독특한 패턴 → media.* 로그 중점  
└── S4 (무음카메라): 제한적 로그 생성 → audio, vibrator 예외 패턴
```

### **1.4 파일럿 테스트 그룹화 및 수행 일정**

#### **Day 1-2: V0 그룹 (즉시 수집) - 16세션**
| 시간 | 그룹 | 앱 | 케이스 | 반복 | 소요시간 | 전략 |
|------|------|-----|--------|------|----------|------|
| 09:00-09:30 | P-V0-G1 | S1 | Y,N | R1 | 30분 | 기준 성능 측정 |
| 10:00-10:30 | P-V0-G2 | S2 | Y,N | R1 | 30분 | Intent 패턴 확인 |
| 11:00-11:30 | P-V0-G3 | S3 | Y,N | R1 | 30분 | 인앱 카메라 패턴 |
| 12:00-12:30 | P-V0-G4 | S4 | Y,N | R1 | 30분 | 제한적 패턴 측정 |
| 14:00-15:00 | P-V0-G1~4 | All | Y,N | R2 | 60분 | 재현성 검증 |

#### **Day 3-6: V-Time 그룹 (24시간 후 수집) - 16세션**
**효율적 전략: V0-V-Time 연계 실험**
| 일자 | 실험 수행 | 로그 수집 | 연계 효과 |
|------|-----------|-----------|----------|
| Day 3 | S1 V-Time 실험 (09:00-09:30) | - | V0 결과와 직접 비교 |
| Day 4 | S2 V-Time 실험 (09:00-09:30) | S1 V-Time 수집 | 시간 경과 효과 측정 |
| Day 5 | S3 V-Time 실험 (09:00-09:30) | S2 V-Time 수집 | 동일 조건 대비 |
| Day 6 | S4 V-Time 실험 (09:00-09:30) | S3 V-Time 수집 | 효율 30% 향상 |
| Day 7 | - | S4 V-Time 수집 | 연계 완료 |

#### **Day 8: V-Usage 그룹 (간섭 후 수집) - 16세션**
**효율적 전략: V-Usage 연속성 실험**
| 시간 | 그룹 | 1차 카메라 행위 | 간섭 시나리오 | 2차 수집 | 연속성 효과 |
|------|------|----------------|---------------|----------|-------------|
| 09:00-10:30 | P-VU-S1 | 촬영Y,N 각 1세션 | 30분 체계적 간섭 | 추가 2세션 수집 | 하나의 실험으로 4세션 확보 |
| 11:00-12:30 | P-VU-S2 | 촬영Y,N 각 1세션 | 30분 체계적 간섭 | 추가 2세션 수집 | 효율성 50% 향상 |
| 13:30-15:00 | P-VU-S3 | 촬영Y,N 각 1세션 | 30분 체계적 간섭 | 추가 2세션 수집 | 연속성 검증 |
| 15:30-17:00 | P-VU-S4 | 촬영Y,N 각 1세션 | 30분 체계적 간섭 | 추가 2세션 수집 | 제한 패턴 극복 |

**체계적 간섭 시나리오 (30분)**:
```bash
# 1단계 (15분): 일반적 간섭
- 브라우저 검색 5회, 갤러리 확인 3분
- 동영상 재생 5분, SNS 메시지 10회

# 2단계 (15분): 카메라 관련 간섭  
- 4개 앱에서 각각 카메라 실행→촬영→종료
- 결과: V-Usage 데이터와 동시에 추가 세션 확보
```

#### **Day 9: V-Event 그룹 (재부팅 후 수집) - 16세션**
| 시간 | 그룹 | 실험+재부팅 | 수집 | 휘발성 확인 |
|------|------|-------------|------|-------------|
| 09:00-09:45 | P-VE-S1 | 30분 실험 + 7분 재부팅 + 8분 수집 | 고휘발성 로그 소실 확인 | audio, vibrator 중점 |
| 10:15-11:00 | P-VE-S2 | 30분 실험 + 7분 재부팅 + 8분 수집 | Intent 패턴 보존성 | activity 중점 |
| 11:30-12:15 | P-VE-S3 | 30분 실험 + 7분 재부팅 + 8분 수집 | 미디어 로그 보존성 | media.* 중점 |
| 12:45-13:30 | P-VE-S4 | 30분 실험 + 7분 재부팅 + 8분 수집 | 제한 패턴 완전 소실 | 기대값 검증 |

### **1.5 파일럿 수집 로그 (6개 선정)**
```bash
# 서비스 활성화 로그 (2개)
adb shell dumpsys media.camera > session_camera.log
adb shell dumpsys usagestats > session_usagestats.log

# Activity 및 사용 패턴 로그 (1개)  
adb shell dumpsys activity > session_activity.log

# 촬영 행위 특화 로그 (3개)
adb shell dumpsys audio > session_audio.log
adb shell dumpsys media.metrics > session_metrics.log
adb shell dumpsys vibrator_manager > session_vibrator.log
```

### **1.6 파일럿 결과 기반 평가**
| 로그 | 예상 사용 탐지 성능 | 예상 촬영 탐지 성능 | 특화 영역 | 휘발성 영향 |
|------|-------------------|-------------------|----------|-----------|
| **media_camera** | F1=0.93 | F1=0.83 | **서비스 활성화** | V-Event 취약 |
| **usagestats** | F1=0.97 | F1=0.80 | **앱 사용 패턴** | 상대적 안정 |
| **activity** | F1=0.91 | F1=0.76 | **Activity 전환** | V-Event 취약 |
| **audio** | F1=0.67 | F1=0.94 | **셔터음 탐지** | 매우 취약 |
| **media_metrics** | F1=0.65 | F1=0.88 | **미디어 처리** | V-Event 취약 |
| **vibrator_manager** | F1=0.61 | F1=0.80 | **햅틱 피드백** | 극도로 취약 |

---

## **⚗️ 2단계: 본 실험 (160세션)**

### **2.1 실험 설계**
| 변수 | 수준 | 설명 |
|------|------|------|
| 앱 아키텍처 | S1, S2, S3, S4 (4개) | 파일럿에서 검증된 특성 |
| 촬영 케이스 | 촬영Y, 촬영N (2개) | 이중 Ground Truth 적용 |
| 휘발성 조건 | V0, V-Time, V-Usage, V-Event (4개) | H2 가설 검증용 |
| 반복 횟수 | 5회 | 통계적 검정력 확보 (각 조건당 56세션) |

**총 세션 수**: 4 × 2 × 4 × 5 = **160세션**

### **2.2 본 실험 로그 특성 기반 최적화 전략**

#### **전략 1: 로그별 최적 수집 조건 적용**
```
파일럿 결과 기반 최적화:
├── 고성능 로그 (usagestats, media_camera): 모든 조건 균등 처리
├── 휘발성 취약 로그 (audio, vibrator): V0, V-Time 우선 배정
├── 앱별 특화 로그 (activity): S2, S3 조건에서 집중 수집
└── 미디어 특화 로그 (media_metrics): S1, S3 조건에서 집중 수집
```

#### **전략 2: 효율적 실험 전략 적용**
```
V0-V-Time 연계 실험:
├── 동일 세션을 V0에서 먼저 실행
├── 24시간 후 동일 조건에서 V-Time 수집  
├── 결과: 시간 경과 효과 직접 비교 가능
└── 효과: 별도 실험 불필요로 25% 시간 단축

V-Usage 연속성 실험:
├── 첫 번째 카메라 행위 수행
├── 체계적 간섭 시나리오로 추가 세션 생성
├── 결과: 하나의 실험에서 복수 세션 확보
└── 효과: 추가 5% 시간 단축
```

### **2.3 본 실험 그룹화 및 수행 일정**

#### **Week 1 (Day 10-12): V0 그룹 (40세션)**
| 일자 | 시간 | 그룹 | 앱 조합 | 세션수 | 소요시간 | 전략 적용 |
|------|------|------|--------|--------|----------|----------|
| Day 10 | 09:00-12:00 | ME-V0-G1 | S1×10, S2×10 | 20 | 3시간 | 기준 성능 + Intent 특성 |
| Day 11 | 09:00-12:00 | ME-V0-G2 | S3×10, S4×10 | 20 | 3시간 | 미디어 특화 + 제한 패턴 |
| Day 12 | 09:00-10:00 | V0-보충 | 추가 보완 | - | 1시간 | 품질 보장 |

#### **Week 2 (Day 13-17): V-Time 그룹 (40세션)**
**V0-V-Time 연계 전략 적용**
| 일자 | V-Time 실험 | V0 연계 수집 | 연계 분석 효과 |
|------|-------------|-------------|----------------|
| Day 13 | S1 V-Time 20세션 | - | V0 결과와 직접 비교 |
| Day 14 | S2 V-Time 20세션 | S1 V-Time 수집 | 시간별 성능 변화 추적 |
| Day 15 | S3 V-Time 20세션 | S2 V-Time 수집 | 앱별 시간 민감도 분석 |
| Day 16 | S4 V-Time 20세션 | S3 V-Time 수집 | 제한 패턴 시간 변화 |
| Day 17 | - | S4 V-Time 수집 | 연계 분석 완료 |

#### **Week 3 (Day 18-19): V-Usage 그룹 (40세션)**
**V-Usage 연속성 전략 적용**
| 일자 | 시간 | 주요 실험 | 연속성 확보 | 효율성 |
|------|------|-----------|-------------|---------|
| Day 18 | 09:00-15:00 | S1, S2 각 10세션 | 간섭 시나리오로 추가 세션 | 50% 효율 향상 |
| Day 19 | 09:00-15:00 | S3, S4 각 10세션 | 지속적 패턴 변화 추적 | 연속성 검증 |

**고도화된 간섭 시나리오 (본 실험용)**:
```bash
# 1단계 간섭 (15분): 일반 앱 사용
for app in browser gallery video_player messenger; do
    launch_app $app
    perform_standard_usage 2min
    close_app $app
done

# 2단계 간섭 (15분): 카메라 집중 간섭
for camera_app in S1 S2 S3 S4; do
    launch_camera $camera_app
    activate_preview 30sec
    take_photo 1
    close_app $camera_app
done

# 결과: 추가로 8세션 분량의 V-Usage 데이터 확보
```

#### **Week 4 (Day 20-21): V-Event 그룹 (40세션)**
| 일자 | 시간 | 앱 그룹 | 휘발성 검증 중점 | 전략 |
|------|------|--------|------------------|------|
| Day 20 | 09:00-15:00 | S1×10, S2×10 | 기본 서비스 로그 보존성 | usagestats, media_camera |
| Day 21 | 09:00-15:00 | S3×10, S4×10 | 고휘발성 로그 완전 소실 | audio, vibrator_manager |

### **2.4 본 실험 효율성 최적화 결과**
```
총 실험 기간: 12일 → 효율화로 8일 단축 → 실제 4일
├── V0-V-Time 연계: 25% 시간 단축
├── V-Usage 연속성: 5% 시간 단축  
├── 로그별 특성 그룹핑: 추가 10% 효율
└── 총 효과: 40% 시간 단축 (원래 20일 → 12일)
```

---

## **🔒 3. 데이터 무결성 검증 시스템**

### **3.1 SHA-256 해시값 생성 절차**
```bash
#!/bin/bash
# 224session_integrity_system.sh

SESSION_ID=$1
LOG_TYPES=("camera" "usagestats" "activity" "audio" "metrics" "vibrator")

for LOG_TYPE in "${LOG_TYPES[@]}"; do
    LOG_FILE="session_${SESSION_ID}_${LOG_TYPE}.log"
    
    # 로그 수집
    adb shell dumpsys ${LOG_TYPE} > "$LOG_FILE"
    
    # 개별 파일 해시
    LOG_HASH=$(sha256sum "$LOG_FILE" | awk '{print $1}')
    LOG_SIZE=$(stat -c%s "$LOG_FILE")
    TIMESTAMP=$(date '+%Y-%m-%d %H:%M:%S.%3N')
    
    # 무결성 메타데이터 생성
    cat > "${LOG_FILE}.integrity" << EOF
FILE: $LOG_FILE
SIZE: $LOG_SIZE bytes
SHA256: $LOG_HASH
COLLECTED: $TIMESTAMP
SESSION_ID: $SESSION_ID
LOG_TYPE: $LOG_TYPE
EOF
done

# 세션 통합 해시 생성
SESSION_HASH=$(cat session_${SESSION_ID}_*.log | sha256sum | awk '{print $1}')
TOTAL_SIZE=$(du -b session_${SESSION_ID}_*.log | awk '{sum+=$1} END{print sum}')

# 세션 메타데이터
cat > "session_${SESSION_ID}_metadata.json" << EOF
{
    "session_id": "$SESSION_ID",
    "total_files": 6,
    "total_size_bytes": $TOTAL_SIZE,
    "session_hash": "$SESSION_HASH",
    "timestamp": "$(date -Iseconds)",
    "integrity_verified": true
}
EOF

echo "✅ Session $SESSION_ID: 데이터 무결성 확보 완료"
```

### **3.2 실시간 무결성 검증**
```bash
# 224session_integrity_check.sh

echo "224세션 데이터 무결성 전체 검증..."

TOTAL_SESSIONS=224
VERIFIED_SESSIONS=0
FAILED_SESSIONS=()

for i in $(seq 1 $TOTAL_SESSIONS); do
    if [ -f "session_${i}_metadata.json" ]; then
        STORED_HASH=$(jq -r '.session_hash' "session_${i}_metadata.json")
        CURRENT_HASH=$(cat session_${i}_*.log | sha256sum | awk '{print $1}')
        
        if [ "$STORED_HASH" == "$CURRENT_HASH" ]; then
            ((VERIFIED_SESSIONS++))
            echo "✅ Session $i: 무결성 확인"
        else
            FAILED_SESSIONS+=($i)
            echo "❌ Session $i: 무결성 오류 (데이터 변조 의심)"
        fi
    else
        echo "⚠️ Session $i: 메타데이터 누락"
        FAILED_SESSIONS+=($i)
    fi
done

echo "========================================"
echo "전체 검증 결과:"
echo "✅ 검증 통과: $VERIFIED_SESSIONS / $TOTAL_SESSIONS"
echo "❌ 오류 세션: ${#FAILED_SESSIONS[@]}"

if [ ${#FAILED_SESSIONS[@]} -eq 0 ]; then
    echo "🎉 224세션 데이터 무결성 완전 확인!"
    exit 0
else
    echo "🚨 무결성 오류 세션: ${FAILED_SESSIONS[@]}"
    exit 1
fi
```

---

## **📊 4. 전체 실험 타임라인 및 리소스**

### **4.1 최적화된 실험 일정**
| 단계 | 기간 | 실제 작업시간 | 주요 활동 | 효율화 전략 |
|------|------|---------------|----------|-------------|
| **파일럿 테스트** | Day 1-9 | 24시간 | 64세션 + 로그 특성 분석 | 로그별 특성 그룹핑 |
| **본 실험 V0** | Day 10-12 | 7시간 | 40세션 즉시 수집 | 앱별 특화 처리 |
| **본 실험 V-Time** | Day 13-17 | 5시간 | 40세션 연계 수집 | **V0-V-Time 연계** |
| **본 실험 V-Usage** | Day 18-19 | 12시간 | 40세션 연속성 수집 | **V-Usage 연속성** |
| **본 실험 V-Event** | Day 20-21 | 12시간 | 40세션 휘발성 검증 | 휘발성 특성 집중 |
| **데이터 검증** | Day 22-23 | 16시간 | 224세션 무결성 확인 | 자동화 스크립트 |

### **4.2 효율성 지표**
- **총 실험 기간**: **23일** (기존 35일 대비 34% 단축)
- **실제 작업시간**: **76시간** (224세션)
- **세션당 평균시간**: **20분** (설정 7분 + 실험 8분 + 수집 5분)
- **효율화 효과**: **40% 시간 단축**
  - V0-V-Time 연계: 25% 단축
  - V-Usage 연속성: 5% 단축  
  - 로그 특성 그룹핑: 10% 단축

### **4.3 품질 보장 요소**
- **이중 Ground Truth**: 카메라 사용 vs 촬영 분리 측정
- **SHA-256 무결성**: 224세션 × 6로그 = 1,344개 파일 변조 방지
- **로그 특성 최적화**: 각 로그별 최적 수집 조건 적용
- **자동화**: Python 스크립트로 수작업 오류 제거
- **재현성**: 모든 절차 완전 문서화

---

## **📋 5. 224세션 실험 체크리스트**

### **5.1 실험 전 준비사항**
- [ ] **Galaxy S24 Ultra (Android 15)** 준비 및 테스트
- [ ] **ADB 환경** 구성 및 6개 로그 수집 확인
- [ ] **4개 실험 앱** 설치 및 권한 설정
  - [ ] S1: com.sec.android.app.camera
  - [ ] S2: com.kakao.talk  
  - [ ] S3: org.telegram.messenger
  - [ ] S4: com.malash.silentcamera
- [ ] **로그 수집 스크립트** 완전 테스트
- [ ] **SHA-256 무결성 시스템** 동작 확인
- [ ] **데이터 저장소** 용량 확인 (최소 100GB)
- [ ] **이중 분석 Python 스크립트** 준비

### **5.2 일일 실험 체크리스트**
- [ ] **기기 상태 확인** (배터리 80%+, 저장공간 50GB+)
- [ ] **네트워크 환경** 안정화 (Wi-Fi 5GHz 연결)
- [ ] **실험 조건 설정** 정확성 확인
- [ ] **6개 로그 수집** 정상 완료 확인
- [ ] **SHA-256 해시값** 자동 생성 확인
- [ ] **세션 메타데이터** 완성도 확인
- [ ] **다음날 실험** 준비사항 점검

### **5.3 데이터 품질 최종 체크리스트**
- [ ] **224세션 데이터** 수집 완료
- [ ] **1,344개 로그 파일** SHA-256 검증 통과
- [ ] **이중 Ground Truth** 배열 정확성 확인
  - [ ] GT_usage = [1] × 224
  - [ ] GT_capture = [0]×32 + [1]×32 + [0]×80 + [1]×80
- [ ] **메타데이터** 완성도 100%
- [ ] **분석용 데이터** 포맷 변환 완료
- [ ] **무결성 검증** 전체 통과

---

## **🎯 6. 예상 실험 결과**

### **6.1 로그별 예상 성능 (파일럿 기반)**

#### **카메라 사용 탐지 특화 로그**
| 로그명 | 예상 F1 | 특화 영역 | 휘발성 취약점 |
|--------|---------|----------|-------------|
| **usagestats** | 0.97 | 앱 사용 패턴 추적 | V-Event 상대적 안정 |
| **media_camera** | 0.93 | 카메라 서비스 활성화 | V-Event에서 중간 수준 영향 |
| **activity** | 0.91 | Activity 생명주기 추적 | V-Event에서 부분 소실 |

#### **카메라 촬영 탐지 특화 로그**  
| 로그명 | 예상 F1 | 특화 영역 | 휘발성 취약점 |
|--------|---------|----------|-------------|
| **audio** | 0.94 | 셔터음 및 오디오 포커스 | V-Event에서 완전 소실 |
| **media_metrics** | 0.88 | 미디어 파일 처리 통계 | V-Usage에서 덮어쓰기 |
| **vibrator_manager** | 0.80 | 촬영시 햅틱 피드백 | V-Event에서 극도로 취약 |

### **6.2 가설 검증 예상 결과**

#### **H1 (앱 아키텍처 영향) 예상 결과**
```
유의미한 차이 예상 (p<0.01):
├── S4(무음카메라)에서 audio, vibrator 성능 급격한 하락
├── S2(카카오톡)에서 activity 로그 특화 성능 향상  
├── S1(삼성카메라)에서 전반적으로 높은 성능
└── Cohen's f > 0.5 (큰 효과크기) 예상
```

#### **H2 (휘발성 영향) 예상 결과**
```
휘발성 조건별 성능 차이 (p<0.001):
├── V0 > V-Time > V-Usage >> V-Event 순서
├── 고휘발성 로그(audio, vibrator)에서 극심한 차이
├── 저휘발성 로그(usagestats)에서 상대적 안정성
└── 전체적으로 Cohen's f > 0.8 (매우 큰 효과크기)
```

### **6.3 실무적 활용 가이드라인 도출**
```
예상 최종 가이드라인:

"일반적인 카메라 사용 탐지":
1순위: usagestats (F1=0.97, 모든 조건 안정)
2순위: media_camera (F1=0.93, V-Event 주의)

"무음 카메라 촬영 탐지":  
1순위: media_metrics (F1=0.88, S4에서도 유효)
2순위: audio (F1=0.94, 단 V-Event에서 완전 소실)

"재부팅 후 탐지":
유일한 옵션: usagestats (다른 로그 대부분 소실)
```

---

**이 실험 계획서는 224세션 이중 분석 프레임워크를 효율적이고 체계적으로 수행할 수 있도록 설계되었으며, 로그별 특성과 휘발성을 고려한 최적화된 그룹화 전략을 통해 40% 시간 단축과 함께 높은 데이터 품질을 보장합니다.**
