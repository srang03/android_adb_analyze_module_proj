# 논문 연구 설계

## 연구 목적 및 배경
1.1 최근 정보 유출 사고에서 스마트폰 촬영 행위가 보안 위협으로 대두된다.
1.2 특히 기업 출입 보안, 감찰, 국가 중요시설 등에서 촬영 행위 자체의 사후 탐지 수단 필요하다.
1.3 유출사고를 막기 위해서 기업에서 사용하는 방법으로는 보안 카메라 필름(물리보안), MDM(모바일 접근 통제 솔루션), 포렌식 도구(GMD soft RED) 등이 존재한다. 
1.4 위 방법 중 사진 촬영 행위에 대한 사후 탐지하는 방법에는 포렌식, 분석 도구가 존재한다. 

- 하지만, 위 방법에는 몇가지 이슈가 존재한다.
    - **물리적 보안(카메라 필름)**:
        - 손쉬운 탈부착이 가능하고 환경 영향에 취약함
        - 위조 및 복제 가능성으로 인한 신뢰성 문제
        - 사용자 편의성 저하 및 정상적 카메라 사용 제한
    - **MDM(Mobile Device Management) 솔루션**:
        - 개인 기기에 대한 과도한 접근 권한 요구로 프라이버시 침해 우려
        - 근무시간 외 접근 제한의 어려움과 법적 이슈
        - 관리 부담과 비용 증가 문제
    - **포렌식 도구**:
        - 루팅 필요성으로 인한 기기 보증 손실 및 보안 취약점 발생
        - 현장에서의 즉각적 분석 어려움과 시간적 제약
        - 고비용 및 전문 인력 필요

1.4 루팅, 탐지, 디바이스 내 분석 앱 설치, MDM 도입 등은 현실적·정책적 한계가 존재한다.
1.5 안드로이드 시스템은 다양한 시스템 로그를 생성하며, 이 중 일부는 루트 권한 없이도 ADB(Android Debug Bridge)를 통해 접근이 가능하다. 본 연구에서는 이러한 로그들을 분석하고 조합하여 촬영 행위를 탐지하는 기존 방식의 한계를 극복할 수 있는 대안이 될 수 있다.

## 선행 연구와 차이점
1. 포렌식 관련 선행 연구는 루팅 환경에서 로그를 추출하는 방법과 테스트 애뮬레이터에서 로그를 추출하는 방법을 제시하고 있다.
=> 실사용 디바이스 루팅 수행시 이슈, 애뮬레이터는 실사용 디바이스가 아니고 테스트 디바이스이므로 실무 사용을 위한 연구에는 적합하지 않음

2. 비루팅 환경에서의 안드로이드 로그를 활용한 촬영 탐지 연구는 다수 존재하지만, 이들 대부분은 특정 로그의 탐지 가능성에 대한 연구가 이루어졌다. 선행 연구들을 대부분 로그를 수집하고 로그 내용을 분석하는 정성적 분석만 수행하고, 해당 로그들을 사용하여 탐지하는 해결책을 주지는 않음.
(예시)
ex01. A 로그를 보면 카메라 사용 여부 로그 출력
ex02. B 로그를 보면 사진 촬영 여부 로그 출력

3. 선행 연구에서는 실험에 대한 로그 데이터로 출력 유무만 나오고 정확한 정량적 분석은 수행하지 않음
선행 연구에서는 카메라 촬영 탐지를 카메라 사용과 파일 시스템의 파일 정보로 카메라 촬영에 대한 탐지가능하다고 주장하였지만, 파일 시스템에서 촬영된 사진 파일을 삭제할 경우 미탐이 발생할 수 있다. 

4. 촬영 파일 생성 탐지 방법
“adb shell content query -—user [User ID#] --uri [uri]” 명령어를 사용하면 특정 사용자 환경의 미디어 데이터베이스 정보를 
확인할 수 있다. <Table 6>의 uri를 이용하여 원하는 미디어 데이터베이스 값을 확인할 수 있고, 앞선 명령어에 “--where” 옵션을 추가하고 —where 옵션의 파라미터로 “added_data” 값 범위를 지정하여 파일 검색 가능

5. 본 연구는 기존 연구와 달리, 비루팅 환경에서 수집 가능한 다양한 로그들을 수집·비교해서 사진 촬영에 대한 탐지 모듈을 만들어 스마트폰 사진 촬영에 대한 보안이 필요한 현장과 실무에서 촬영 여부를 탐지 할 수 있는 타임라인 복원 모듈을 제공하여 보안 수준을 강화하는데 기여할 수 있다.

## 선행 연구와 차별성 정리
- 기존 연구는 루팅 기기나 에뮬레이터 기반 로그 추출에 집중 → 실사용 환경 적용 어려움.

- 비루팅 환경 연구도 존재하나, 대부분 단일 로그 신호의 정성적 가능성 확인 수준에 머물렀다.

- 파일 시스템 기반 탐지 연구는 촬영 후 파일 삭제 시 미탐이 발생하는 한계 존재.

- 본 연구는 비루팅 환경에서 수집 가능한 다원 로그를 정량적 지표로 평가·조합하여, 사진 촬영 여부를 시간축 타임라인 복원 모듈로 탐지, 실무 현장에서 사용 가능한 탐지 모듈 설계·평가까지 제시한다.


## 연구 핵심질문
연구 목표: 비루팅 환경에서 ADB 로그를 활용한 스마트폰 촬영 행위 탐지 칠 탕미라인 복원
Q1. ADB 수집 가능한 로그로 촬영 행위 탐지가 가능한지?
Q2. 어떤 로그 조합이 가장 효과적인지?
Q3. 실무 환경에서 사용 가능한 정확도를 달성할 수 있는가?


## 로그의 역할군 정의
1. R1: 카메라 사용(세션) 신호 — 카메라 앱/세션의 시작·활성화 상태(촬영 전후 포함)
2. R2: 촬영(셔터) 신호 — 실제 “촬영” 행위를 직접 반영하는 이벤트군
3. R3: 파일 생성 신호 — 촬영 결과물(사진/미디어)의 생성·인덱싱·파일시스템 변화

## 우선순위 산출 (데이터 특성)
정확성 𝐴 
A: 소스 단독으로 촬영을 맞히는 정도(F1; 촬영 라벨과 ±윈도우 내 매칭)

휘발성 𝑃
P: 시간 경과·재부팅 후 재현되는 비율(10분/1h/24h/재부팅 가중 평균)

범용성 𝐺
G: 안드로이드 OS 버전과 앱의 조합에서 성능 일관성 (조합별 성능의 정규화 평균)
=> 안드로이드 15, 14, 13버전 기준

## Ground Truth
### ADB content query 방식
- 선행 연구에서 검증된 방법으로 신뢰성 있고, 비루팅 환경에서 접근 가능, 정확한 파일 생성 시간 추출 가능
- 촬영 후 파일 생성까지 0.1초 ~ 3초의 가변적 지연 발생
- 기기 성능, 행상도, 저장 위치에 따라 지연 시간이 상이

---

# 모듈 개발 프로세스

## 2. 실험 방법
### 3.1 ADB 무선연결


## 3. 시나리오 기반 실험 수행
### 3.1 카메라 사용 및 촬영 시나리오 목록
1. 일반 카메라 앱 사용 및 사진 촬영
2. 카카오톡 앱 사용 및 사진 촬영
3. 텔레그램 앱 사용 및 사진 촬영
4. 무음 앱 사용 및 사진 촬영

## 4. 데이터 추출
### 4.1 로그 추출
1. adb shell dumpsys 명령어로 로그를 로그 파일로 추출한다.
2. adb shell content query -—user [User ID#] --uri [uri]

## 5. 데이터 프로세싱
### 5.1 로그 선별 (역할 분류)
- 수 많은 로그 파일 중 카메라 사용과 사진 촬영에 관련 로그 파일만 선별한다.

- 1차 선별 기준: 로그 파일들에서 "카메라 관련 packageId 식별자", "CAMERA", "촬영한 시간 기준"으로 키워드 검색해서 로그 파일 선별 작업
- 2차 선별 기준: 시간적 상관관계 (촬영 시점 ±1초)

- 역할군 분류 (R1, R2, R3)
    1. R1: 카메라 사용(세션) 신호 — 카메라 앱/세션의 시작·활성화 상태(촬영 전후 포함)
    2. R2: 촬영(셔터) 신호 — 실제 “촬영” 행위를 직접 반영하는 이벤트군
    3. R3: 파일 생성 신호 — 촬영 결과물(사진/미디어)의 생성·인덱싱·파일시스템 변화

### 5.2 데이터 전처리
- 전처리: 로그 파일 간의 상관관계 분석과 결과 보고서 작성을 위한 데이터 전처리 및 데이터 스키마 동일하도록 변경 작업 수행
- 로그 정규화 및 시간 동기화

### 5.3 선행 연구 차별 데이터 언급
- 선행 연구에서 언급하지 않거나 연구되지 않은 로그에 대한 설명 언급
    
## 6. 데이터 분석
### 6.1 데이터 특성 측정  
    1. 정확성: 카메라 사용인지? 카메라 촬영인지?
        - 방법: F1-score 계산 (0~1)
        - 공식: 2 × (Precision × Recall) / (Precision + Recall)
        - F1-score (0~1)
    2. 휘발성: 디바이스 재부팅 또는 기간에 따른 로그가 삭제되는지?
        - 방법: 시간별 로그 유지율
        - 공식: (재부팅 후 유지 로그 수 / 전체 로그 수)
        - 측정점: 1시간/24시간/재부팅 후
        - 24시간 유지율 (0~1)
    3. 범용성: 디바이스의 모델과 버전에 따라 동일하게 로그가 발생되는지?
        - 최소/최대 성능비 (0~1) 또는 단순히 "모든 버전에서 동작 여부"로 단순화

### 6.2 개별 로그 유효성 측정
    - 각 로그의 촬영 탐지 정확도 측정
    - 노이즈 수준 평가
    - Precision, Recall, F1-score 계산 (?)

### 6.3 로그 선별 및 조합
    - 

### 7. 타임라인 복원 모듈 (탐지 모듈) 개발
- 복잡한 알고리즘이 아닌 직관적 인터페이스 적용
- 시간순 이벤트 나열, 촬영 행위 탐지 및 표시 수행

### 8. 타임라인 복원 모듈 평가
- 실제 카메라 촬영 탐지가 가능한지?
- 오탐, 미탐에 대한 문제 확인



## 고려해야할 사항
1. 로그 파일 선별 기준?
1.1 여러 로그 파일에서 카메라 실행과 사진 촬영 관련 로그가 생성되어서 동일한 행위에 대한 중복 로그가 발생할 수 있는데 이 중 모듈에 사용할 로그를 채택하는 기준은? 
1.1.1 기본 조합을 위한 로그 파일 채택 방법론과 근거가 필요합니다.
Q. 기본 조합: 카메라 사용 로그 + 사진 촬영 로그 + 파일 생성 로그
1.1.2 기본 조합의 로그 파일이 삭제되거나 추출하지 못하는 경우 다른 로그 파일을 채택하여 조합되어야 하는데, 이때 우선순위 결정하는 방법론과 근거가 필요합니다.
Q. 기본 조합의 로그들이 삭제되거나 추출하지 못하는 경우 다른 중복된 로그 파일을 채택하여 조합
Q. 이 때 그럼 중복 로그에서의 선택 우선순위는?

2. 데이터 특성을 "정확성", "휘발성", "범용성"으로 분류가 가능한지?
Q. 위 두가지 특성으로 로그 파일을 분류해도 괜찮을지?
Q. 3가지 특성으로만 분류하는 근거는 무엇인지?
Q. 추가될 다른 명확한 특성이 존재하는지?

3. 데이터 분석시 어떤 방법론을 사용해야하는지?
Q. 로그 데이터 평가가 가능한지와 평가 방법은 무엇인지?
Q. 로그별 상관관계 분석이 실제로 가능한지와 분석 방법은 무엇인지?
Q 로그 조합 분석이 실제로 가능하지와 분석 방법은 무엇인지?

4. 현재 타임라인 복원 생성의 프로세스가 올바른지 검토 필요
시나리오 기반으로 실험 수행 > 데이터 추출 > 데이터 프로세싱 > 데이터 분석 > 타임라인 복원 모듈 개발 > 모듈 평가